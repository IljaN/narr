// Code generated by cdpgen. DO NOT EDIT.

// Package webauthn implements the WebAuthn domain. This domain allows
// configuring virtual authenticators to test the WebAuthn API.
package webauthn

import (
	"context"

	"github.com/mafredri/cdp/protocol/internal"
	"github.com/mafredri/cdp/rpcc"
)

// domainClient is a client for the WebAuthn domain. This domain allows
// configuring virtual authenticators to test the WebAuthn API.
type domainClient struct{ conn *rpcc.Conn }

// NewClient returns a client for the WebAuthn domain with the connection set to conn.
func NewClient(conn *rpcc.Conn) *domainClient {
	return &domainClient{conn: conn}
}

// Enable invokes the WebAuthn method. Enable the WebAuthn domain and start
// intercepting credential storage and retrieval with a virtual authenticator.
func (d *domainClient) Enable(ctx context.Context, args *EnableArgs) (err error) {
	if args != nil {
		err = rpcc.Invoke(ctx, "WebAuthn.enable", args, nil, d.conn)
	} else {
		err = rpcc.Invoke(ctx, "WebAuthn.enable", nil, nil, d.conn)
	}
	if err != nil {
		err = &internal.OpError{Domain: "WebAuthn", Op: "Enable", Err: err}
	}
	return
}

// Disable invokes the WebAuthn method. Disable the WebAuthn domain.
func (d *domainClient) Disable(ctx context.Context) (err error) {
	err = rpcc.Invoke(ctx, "WebAuthn.disable", nil, nil, d.conn)
	if err != nil {
		err = &internal.OpError{Domain: "WebAuthn", Op: "Disable", Err: err}
	}
	return
}

// AddVirtualAuthenticator invokes the WebAuthn method. Creates and adds a
// virtual authenticator.
func (d *domainClient) AddVirtualAuthenticator(ctx context.Context, args *AddVirtualAuthenticatorArgs) (reply *AddVirtualAuthenticatorReply, err error) {
	reply = new(AddVirtualAuthenticatorReply)
	if args != nil {
		err = rpcc.Invoke(ctx, "WebAuthn.addVirtualAuthenticator", args, reply, d.conn)
	} else {
		err = rpcc.Invoke(ctx, "WebAuthn.addVirtualAuthenticator", nil, reply, d.conn)
	}
	if err != nil {
		err = &internal.OpError{Domain: "WebAuthn", Op: "AddVirtualAuthenticator", Err: err}
	}
	return
}

// SetResponseOverrideBits invokes the WebAuthn method. Resets parameters
// isBogusSignature, isBadUV, isBadUP to false if they are not present.
func (d *domainClient) SetResponseOverrideBits(ctx context.Context, args *SetResponseOverrideBitsArgs) (err error) {
	if args != nil {
		err = rpcc.Invoke(ctx, "WebAuthn.setResponseOverrideBits", args, nil, d.conn)
	} else {
		err = rpcc.Invoke(ctx, "WebAuthn.setResponseOverrideBits", nil, nil, d.conn)
	}
	if err != nil {
		err = &internal.OpError{Domain: "WebAuthn", Op: "SetResponseOverrideBits", Err: err}
	}
	return
}

// RemoveVirtualAuthenticator invokes the WebAuthn method. Removes the given
// authenticator.
func (d *domainClient) RemoveVirtualAuthenticator(ctx context.Context, args *RemoveVirtualAuthenticatorArgs) (err error) {
	if args != nil {
		err = rpcc.Invoke(ctx, "WebAuthn.removeVirtualAuthenticator", args, nil, d.conn)
	} else {
		err = rpcc.Invoke(ctx, "WebAuthn.removeVirtualAuthenticator", nil, nil, d.conn)
	}
	if err != nil {
		err = &internal.OpError{Domain: "WebAuthn", Op: "RemoveVirtualAuthenticator", Err: err}
	}
	return
}

// AddCredential invokes the WebAuthn method. Adds the credential to the
// specified authenticator.
func (d *domainClient) AddCredential(ctx context.Context, args *AddCredentialArgs) (err error) {
	if args != nil {
		err = rpcc.Invoke(ctx, "WebAuthn.addCredential", args, nil, d.conn)
	} else {
		err = rpcc.Invoke(ctx, "WebAuthn.addCredential", nil, nil, d.conn)
	}
	if err != nil {
		err = &internal.OpError{Domain: "WebAuthn", Op: "AddCredential", Err: err}
	}
	return
}

// GetCredential invokes the WebAuthn method. Returns a single credential
// stored in the given virtual authenticator that matches the credential ID.
func (d *domainClient) GetCredential(ctx context.Context, args *GetCredentialArgs) (reply *GetCredentialReply, err error) {
	reply = new(GetCredentialReply)
	if args != nil {
		err = rpcc.Invoke(ctx, "WebAuthn.getCredential", args, reply, d.conn)
	} else {
		err = rpcc.Invoke(ctx, "WebAuthn.getCredential", nil, reply, d.conn)
	}
	if err != nil {
		err = &internal.OpError{Domain: "WebAuthn", Op: "GetCredential", Err: err}
	}
	return
}

// GetCredentials invokes the WebAuthn method. Returns all the credentials
// stored in the given virtual authenticator.
func (d *domainClient) GetCredentials(ctx context.Context, args *GetCredentialsArgs) (reply *GetCredentialsReply, err error) {
	reply = new(GetCredentialsReply)
	if args != nil {
		err = rpcc.Invoke(ctx, "WebAuthn.getCredentials", args, reply, d.conn)
	} else {
		err = rpcc.Invoke(ctx, "WebAuthn.getCredentials", nil, reply, d.conn)
	}
	if err != nil {
		err = &internal.OpError{Domain: "WebAuthn", Op: "GetCredentials", Err: err}
	}
	return
}

// RemoveCredential invokes the WebAuthn method. Removes a credential from the
// authenticator.
func (d *domainClient) RemoveCredential(ctx context.Context, args *RemoveCredentialArgs) (err error) {
	if args != nil {
		err = rpcc.Invoke(ctx, "WebAuthn.removeCredential", args, nil, d.conn)
	} else {
		err = rpcc.Invoke(ctx, "WebAuthn.removeCredential", nil, nil, d.conn)
	}
	if err != nil {
		err = &internal.OpError{Domain: "WebAuthn", Op: "RemoveCredential", Err: err}
	}
	return
}

// ClearCredentials invokes the WebAuthn method. Clears all the credentials
// from the specified device.
func (d *domainClient) ClearCredentials(ctx context.Context, args *ClearCredentialsArgs) (err error) {
	if args != nil {
		err = rpcc.Invoke(ctx, "WebAuthn.clearCredentials", args, nil, d.conn)
	} else {
		err = rpcc.Invoke(ctx, "WebAuthn.clearCredentials", nil, nil, d.conn)
	}
	if err != nil {
		err = &internal.OpError{Domain: "WebAuthn", Op: "ClearCredentials", Err: err}
	}
	return
}

// SetUserVerified invokes the WebAuthn method. Sets whether User Verification
// succeeds or fails for an authenticator. The default is true.
func (d *domainClient) SetUserVerified(ctx context.Context, args *SetUserVerifiedArgs) (err error) {
	if args != nil {
		err = rpcc.Invoke(ctx, "WebAuthn.setUserVerified", args, nil, d.conn)
	} else {
		err = rpcc.Invoke(ctx, "WebAuthn.setUserVerified", nil, nil, d.conn)
	}
	if err != nil {
		err = &internal.OpError{Domain: "WebAuthn", Op: "SetUserVerified", Err: err}
	}
	return
}

// SetAutomaticPresenceSimulation invokes the WebAuthn method. Sets whether
// tests of user presence will succeed immediately (if true) or fail to resolve
// (if false) for an authenticator. The default is true.
func (d *domainClient) SetAutomaticPresenceSimulation(ctx context.Context, args *SetAutomaticPresenceSimulationArgs) (err error) {
	if args != nil {
		err = rpcc.Invoke(ctx, "WebAuthn.setAutomaticPresenceSimulation", args, nil, d.conn)
	} else {
		err = rpcc.Invoke(ctx, "WebAuthn.setAutomaticPresenceSimulation", nil, nil, d.conn)
	}
	if err != nil {
		err = &internal.OpError{Domain: "WebAuthn", Op: "SetAutomaticPresenceSimulation", Err: err}
	}
	return
}

// SetCredentialProperties invokes the WebAuthn method. Allows setting
// credential properties.
// https://w3c.github.io/webauthn/#sctn-automation-set-credential-properties
func (d *domainClient) SetCredentialProperties(ctx context.Context, args *SetCredentialPropertiesArgs) (err error) {
	if args != nil {
		err = rpcc.Invoke(ctx, "WebAuthn.setCredentialProperties", args, nil, d.conn)
	} else {
		err = rpcc.Invoke(ctx, "WebAuthn.setCredentialProperties", nil, nil, d.conn)
	}
	if err != nil {
		err = &internal.OpError{Domain: "WebAuthn", Op: "SetCredentialProperties", Err: err}
	}
	return
}

func (d *domainClient) CredentialAdded(ctx context.Context) (CredentialAddedClient, error) {
	s, err := rpcc.NewStream(ctx, "WebAuthn.credentialAdded", d.conn)
	if err != nil {
		return nil, err
	}
	return &credentialAddedClient{Stream: s}, nil
}

type credentialAddedClient struct{ rpcc.Stream }

// GetStream returns the original Stream for use with cdp.Sync.
func (c *credentialAddedClient) GetStream() rpcc.Stream { return c.Stream }

func (c *credentialAddedClient) Recv() (*CredentialAddedReply, error) {
	event := new(CredentialAddedReply)
	if err := c.RecvMsg(event); err != nil {
		return nil, &internal.OpError{Domain: "WebAuthn", Op: "CredentialAdded Recv", Err: err}
	}
	return event, nil
}

func (d *domainClient) CredentialAsserted(ctx context.Context) (CredentialAssertedClient, error) {
	s, err := rpcc.NewStream(ctx, "WebAuthn.credentialAsserted", d.conn)
	if err != nil {
		return nil, err
	}
	return &credentialAssertedClient{Stream: s}, nil
}

type credentialAssertedClient struct{ rpcc.Stream }

// GetStream returns the original Stream for use with cdp.Sync.
func (c *credentialAssertedClient) GetStream() rpcc.Stream { return c.Stream }

func (c *credentialAssertedClient) Recv() (*CredentialAssertedReply, error) {
	event := new(CredentialAssertedReply)
	if err := c.RecvMsg(event); err != nil {
		return nil, &internal.OpError{Domain: "WebAuthn", Op: "CredentialAsserted Recv", Err: err}
	}
	return event, nil
}
